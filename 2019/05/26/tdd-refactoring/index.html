<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성</title>
  <meta name="description" content="본 글은 [우아한테크세미나]에서 진행한 자바지기 박재성님의 TDD, 리팩토링강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다.  https://www.youtube.com/watch?v=bIeqAlmNRrA">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://youngwonseo.github.io/2019/05/26/tdd-refactoring/">
  <link rel="alternate" type="application/atom+xml" title="Youngon.Seo" href="https://youngwonseo.github.io/feed.xml" />
</head>

  <body>
    

<div class="header-container" id="header-container">

<!-- Site navigation -->
  <nav class="site-nav">
    <div class="trigger">
      
        
        <a class="page-link" href="/about/">About</a>
        
      
        
        <a class="page-link" href="/archive/">Archive</a>
        
      
        
      
        
      
        
        <a class="page-link" href="/projects/">Projects</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      <a class="page-link" href="/feed.xml">RSS</a>
      <a class="twitter page-link" href="https://twitter.com/fffabs"><span class="icon-twitter"></span></a>
      <a class="facebook page-link" href="https://www.facebook.com/fffabs"><span class="icon-facebook"></span></a>
    </div>
  </nav>

  <!-- The title of the site -->
  <header class="site-header">
    <a href="/">
      <div class="avatar">
        <img src="/assets/images/avatar.png" />
      </div>
    </a>
    <!-- <a class="site-title" href="/">Youngon.Seo</a> -->
  </header>

</div>

      <div class="wrapper">
        <div class="page-content">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성</h1>
    <p class="post-meta">May 26, 2019 • Youngwon Seo</p>
  </header>

  <!-- Beginning Twitter sharing Large button -->
  <!-- <a class="twitter-share-button" href="https://twitter.com/share"
  data-related="twitterdev"
  data-size="large"
  data-count="horizontal">
  Tweet
  </a> -->
  <!-- End of Twitter sharing button -->

  <!-- Facebook -->
  

  <article class="post-content">
    <p>본 글은 [우아한테크세미나]에서 진행한 <strong>자바지기 박재성님</strong>의 <strong>TDD, 리팩토링</strong>강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다.</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=bIeqAlmNRrA">https://www.youtube.com/watch?v=bIeqAlmNRrA</a></li>
</ul>

<p>목차는 다음과 같습니다.</p>
<ul>
  <li>의식적인 연습이란?</li>
  <li>TDD, 리팩토링 적용 - 개인</li>
  <li>TDD, 리팩토링 적용 - 개인(주니어) -&gt; 팀</li>
  <li>TDD, 리팩토링 적용 - 내가 리더</li>
</ul>

<p>본 영상은 TDD와 리팩토링같은 기술적인 사항뿐만 아니라 훌륭한 개발자가 되기위한 방법, 박재성님이 교육자로써 일하시는동안의 훌륭한 학습방법을 제공하기 고안하신 방법들을 설명합니다.</p>

<h2 id="1-의식적인-연습이란-">1. 의식적인 연습이란 ?</h2>

<p>컴포트존에서 벗어나 의식적인 연습, 즉 본인이 자각하는 연습을 꾸준히하며 개발실력을 올리는 것이 중요합니다. 특히 개발업무와 같이 특정기간이 되면 학습없이, 연습없이 제품을 만들어 낼 수 있지만 이것을 넘어 발전하는 방법을 설명합니다. 이러한 과정을 통해야만 훌륭한 개발자가 될 수 있다고 말씀하십니다.</p>

<h3 id="의식적인-연습의-7가지-원칙도서---1만-시간의-재발견">의식적인 연습의 7가지 원칙(도서 - 1만 시간의 재발견)</h3>
<ol>
  <li>효과적인 훈련 기법이 수립되어 있는 기술 연마</li>
  <li>개인의 <strong>컴포트 존을 벗어난 지점에서 진행, 자신의 현재 능력을 살짝 넘어가는 작업을 지속적으로 시도</strong></li>
  <li><strong>명확하고 구체적인 목표</strong>를 가지고 진행</li>
  <li>신중하고 계회적이다. 즉 개인이 온전히 집중하고 ‘의식적’으로 행동할 것을 요구</li>
  <li><strong>피드백과 피드백에 따른 행동 변경</strong>을 수반</li>
  <li>효과적인 심적 표상을 만들어내는 한편으로 심적 표상에 의존</li>
  <li><strong>기존에 습득한 기술의 특정 부분을 집중적으로 개선함으로써 발전시키고, 수정하는 과정</strong>을 수반</li>
</ol>

<p>우아한테크에서는 의식적연습을 위해 아래와 같이 여러가지 제약사항들을 만들어 프로그래밍 과정이 진행된다고 합니다.</p>

<h3 id="우아한테크-과정">우아한테크 과정</h3>
<p>1주차</p>
<ul>
  <li>자바 코드 컨벤션을 지키면서 프로그래밍하기 <a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a></li>
  <li>indent depth가 최대 2, 즉 두번의 들여쓰기 이상 들여쓰기가 안됨, 이를 위해 함수이용</li>
  <li>함수는 한가지 일만하도록 최대한 작게 만들기</li>
</ul>

<p>2주차</p>
<ul>
  <li>함수의 길이가 최대 15</li>
  <li>else를 사용하지 마라</li>
</ul>

<p>3주차</p>
<ul>
  <li>함수는 길이가 최대 10</li>
  <li>index depth 는 최대 1</li>
  <li>함수 인자는 최대 3개</li>
</ul>

<p>공통</p>
<ul>
  <li>commit  주석 및 꾸준히 하며 피드백 받기</li>
</ul>

<h2 id="2-의식적인-연습으로-tdd-리팩토링-적용---개인">2. 의식적인 연습으로 TDD, 리팩토링 적용 - 개인</h2>
<p>TDD와 리팩토링은 운동, 평생동안 연습하겠다는 마음가짐으로 시작합니다. 이를 위해 회사프로젝트보다는 사이드 프로젝트로 시작하여 꾸준히 연습하며 브래이크타임이 없이 연습하는것이 중요합니다. 회사프로젝트의 경우 중간에 우선순위0의 업무들이 주어져 TDD나 리팩토링을 못하는 순간들이 발생하는데 사이드 프로젝트를 통해 꾸준히 연습할 수 있는 환경을 만들어 놓는것입니다. 이 방법은 TDD,리팩토링이 아닌 다른요소들을 연습할때도 추천되는 방법이라고 생각합니다.</p>

<h3 id="1단계-단위테스트-연습">1단계, 단위테스트 연습</h3>
<p>TDD에 대한 간단한 테스트입니다. 자바 내장 API인 String API와 Collection API에 대한 테스트를 직관적으로 보여줍니다.</p>
<pre><code class="language-java">public class StringTest{
  @Test
  public void split() {
    String[] values = "1".split(",");
    assertThat(values).contains("1");
    values = "1,2".split(",");
    assertThat(values).containsExactly("1","2");
  }
  @Test
  public void substring() {
    String input = "(1,2");
    String result = input.substring(1, input.length() - 1);
    assertThat(result).isEqualTo("1,2")
  }
}

public class CollectionTest {
  @Test
  public void arrayList() {
    ArrayList&lt;String&gt; values = new ArrayList&lt;&gt;();
    values.add("first");
    values.add("second");
    assertThat(values.add("third")).isTrue();
    assertThat(values.size()).isEqualsTo(3);
    assertThat(values.get(0)).isEqualsTo("first");
    assertThat(values.contains("first")).isTrue();
    assertThat(values.remove(0)).isEqualTo("first");
    assertThat(values.size()).isEqualTo(2);
  }
}
</code></pre>

<p>위와 같은 연습의 효과는 다음고 같습니다.</p>
<ul>
  <li>단위테스트 방법을 학습할 수 있다.</li>
  <li>단위테스트 도구(xUnit)의 사용법을 익힐 수 있다.</li>
  <li>사용하는 API에 대한 학습 효과가 있다.</li>
</ul>

<p>내가 구현하는 함수에 단위 테스트를 적용을 시작하기 위해서는 <strong>Input과 Output이 명확한 클래스 메소드(보통  Util 성격의 메소드)</strong>부터 시작하면 됩니다.</p>

<h3 id="2단계-tdd-연습">2단계, TDD 연습</h3>
<p>항상 시작은 난의도가 낮은 문제부터 시작합니다. 이를 위해 임의의 테스트환경을 구성합니다. 아래는 문자열 덧셈 계산기(StringCalculator 클래스의 splitAndSum)로 쉼표 또는 콜론을 기준으로 분리한 숫자의 합을 반환하는 기능을 가지고 있습니다. null이나 빈문자열이면 0을 반환합니다.</p>

<p>아래의 테스트코드와 계산기코드를 가지고 리팩토링 시작을 시작해 봅니다. 여기서는 중관과정을 최대한 생략하고 최종 리펙토링 코드들을 보이는데 위의 원본영상을 보시면 변환되는 과정을 살펴볼 수 있습니다.</p>
<pre><code class="language-java">public class StringCalculatorTest {
  @Test
  public void null_또는_빈값() {
    assertThat(StringCalculator.splitAndSum(null)).isEqualsTo(0);
    assertThat(StringCalculator.splitAndSum("")).isEqualsTo(0);
  }
  
  @Test
  public void 값_하나() {
    assertThat(StringCalculator.splitAndSum("1")).isEqualsTo(1);
  }

  @Test
  public void 쉽표_구분자() {
    assertThat(StringCalculator.splitAndSum("1,2")).isEqualsTo(3);
  }
  
  @Test
  public void 쉼표_콜론_구분자() {
    assertThat(StringCalculator.splitAndSum("1,2:3")).isEqualsTo(6);
  }
}

public class StringCalculator {
  public static int splitAndSum(String text){
    int result = 0;
    if(test == null || test.isEmpty()) {
      return 0;
    } else {
      String[] values = test.split(",|:");
      for(String value : values) {
        result += Interger.parseInt(value);
      }
    }
    return result;
  }
}
</code></pre>

<h3 id="3단계---메소드-분리-리팩토링">3단계 - 메소드 분리 리팩토링</h3>
<p>프로덕션코드(StringCalculator)를 리팩토링하는 연습을 시작합니다. 먼저 한 메서드에 오직 한 단계의 들여쓰기(indent)만 하도록 적용하고 else를 제거합니다.</p>
<pre><code class="language-java">public class StringCalculator {
  public static int splitAndSum(String text){
    if(test == null || test.isEmpty()) {
      return 0;
    }
    String[] values = text.split(",:");
    return sum(values);
  }
  
  private static int sum(String[] values){
    int result = 0;
    for(String value : values) {
      result += Interger.parseInt(value);
    }
    return result;
  }
}
</code></pre>

<p>문자열을 숫자로 변환하는 부분과 합치는 부분을 메서드로 분리합니다.</p>
<pre><code class="language-java">public class StringCalculator {
  public static int splitAndSum(String text){
    if(test == null || test.isEmpty()) {
      return 0;
    }
    return sum(toInts(text.split(",|:")));
  }
  
  private static int[] toInts(String[] values){
    int[] numbers = new int[values.length];
    for(int i=0; i&lt; values.length; i++) {
      numbers[i] = Integer.parseInt(values[i]);
    }
    return numbers;
  }
  
  private static int sum(int[] numbers){
    int result = 0;
    for(int number : numbers) {
      result += numbers;
    }
    return result;
  }
}
</code></pre>

<p>compose method  패턴 적용하여 동등한 수준의 작업을 하는 여러 단계로 나눈다.</p>

<pre><code class="language-java">public class StringCalculator {
  public static int splitAndSum(String text){
    if(isBlank(text) {
      return 0;
    }
    return sum(toInts(split(text));
  }
  private static boolean isBlank(String text) {
    return test == null || test.isEmpty();
  }
  private static String[] split(String text) {
    return text.split(",|:");
  }
}
</code></pre>
<p>위 코드를 보면 호출되는 splitAndSum 함수만 public이고 나머지는 전부 private로 구현되는 것을 알 수 있습니다. 이것은 분석하는 입장에서 public메서드를 먼저 분석하면되서 가독석을 높여줍니다. 특이 public메서드에서 호출되는 private메서드 또한 네이밍을 통해 동작작업을 충분히 유추할 수 있는 좋은 코드 입니다.</p>

<p>indent나 else등의 규칙을 한번에 적용하기 보다 한 가지씩 리팩토링하는 것을 추천합니다.</p>

<p>여기서 다시한번 말하지만 리팩토링전 코드, 즉 <strong>컴포트존을 제거하고 리팩토링을 통해 좋은 코드를 작성할 수 있도록 노력합시다!!</strong></p>

<h3 id="리팩토링-연습---클래스-분리">리팩토링 연습 - 클래스 분리</h3>
<p>숫자 이외의 값 또는 음수가 입력되면 RuntimeException 발생하도록 적용합니다. 메서드 toInt를 클래스로 분리, 메서드로 분리된 부분은 클래스로 분리될 요지가 있다고 생각할 수 있습니다.</p>

<pre><code class="language-java">public class Positive{
  private int number;
  public Positive(String value) {
    this(Integer.parseInt(value));
  }
  public Positive(int number) {
    if(number &lt; 0){
      throw new RuntimeException();
    }
    this.number = number;
  }
  public Positive add(Positive other) {
    return new Positive(this.number + other.number);
  }
  public int getNunber() {
    return number;
  }
}
</code></pre>

<h4 id="클래스를-분리하는-원칙">클래스를 분리하는 원칙</h4>
<ul>
  <li>일급컬렉션 (위 Positive는 primitive type을 wrapper한 class)으로 분리가 가능할 경우</li>
</ul>

<p>클래스에 대한 리펙토링 기준으로 3개 이상의 인스턴스 변수를 가진 클래스를 쓰지 않는다.</p>

<p><strong>모든 연습기준은 정략적 기준입니다!</strong> 즉 정확하게 평가가능하고 피드백이 가능합니다.</p>

<h3 id="4단계---장난감-프로젝트-난이도-높이기">4단계 - 장난감 프로젝트 난이도 높이기</h3>
<ul>
  <li>게임과 같이 요구사항이 명확안 프로그램으로 연습</li>
  <li>의존관계(DB등)이 없는 프로젝트</li>
  <li>약간은 복잡한 로직이 있는 프로그램</li>
</ul>

<h3 id="한-단계-더-나아간-연습하기">한 단계 더 나아간 연습하기</h3>
<ul>
  <li>컴파일 에러를 최소화하면서 리팩토링하기</li>
  <li>ATDD 기반으로 응용 어플리케이션 개발하기</li>
  <li>레거시 애플리케이션에 테스트 코드 추가해 리팩토링하기</li>
</ul>

<h3 id="구체적인-연습-목표-찾기">구체적인 연습 목표 찾기</h3>
<p>이러한 방법들은 박재성님이 만드신게 아니라 아래의 책들에서 명시하는 방법이라고 합니다.</p>
<h4 id="객체지향-생활체조-원칙-the-thoughtworks-anthology">객체지향 생활체조 원칙 <a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9788992939249&amp;orderClick=LAG&amp;Kc=">The ThoughtWorks Anthology</a></h4>
<ul>
  <li>규칙 1 : 한 메서드에 오직 한 단계의 들여쓰기만 한다.</li>
  <li>규칙 2 : else 예약어를 쓰지 않는다.</li>
  <li>규칙 3: 모든 원시값과 문자열을 포장한다.</li>
  <li>규칙 4 : 한 줄에 점을 하나만 찍는다.</li>
  <li>규칙 5 : 줄여쓰지 않는다(축약 금지).</li>
  <li>규칙 6 : 모든 엔티티를 작게 유지한다.</li>
  <li>규칙 7 : 3개 이상의 인스턴스 변수를 가진 클래스를 쓰지 않는다.</li>
  <li>규칙 8: 일급 콜렉션을 쓴다.</li>
  <li>규칙 9 : 게터/세터/프로퍼티를 쓰지 않는다.</li>
</ul>

<h4 id="메소드-인자-원칙-cleancode">메소드 인자 원칙 <a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9788966260959&amp;orderClick=LAH&amp;Kc=">CleanCode</a></h4>
<ul>
  <li>메소드 인자 개수</li>
  <li>메소드에서 이상적인 인자개수는 0개이다. 다음은 1개이고, 다음은 2개이다.</li>
  <li>3개는 가능한 피하는 편이 좋다.</li>
  <li>4개 이상은 특별한 이유가 있어도 사용하면 안된다.</li>
</ul>

<p>같은 과제를 반복적으로 연습하며 TDD, 리팩토링 적용하 연습하도록 합니다.</p>

<h2 id="3-tdd-리팩토링-적용---개인주니어---팀">3. TDD, 리팩토링 적용 - 개인(주니어) -&gt; 팀</h2>
<p>변화를 요구, 안되면 퇴사</p>

<h2 id="4-tdd-리팩토링-적용---리더">4. TDD, 리팩토링 적용 - 리더</h2>
<p>1:1로 공약
팀원이 개선할 부분을 말하고, 해결책을 제안하도록 유도</p>

  </article>

  <hr>

  
    <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://youngwonseo.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
  
  <!-- <div class="question">
    <h2>Questions?</h2>
    <p>Have a question regarding the post above? <br />Or any of my designs?</p>
    <a class="twitter-follow-button"
    href="https://twitter.com/fffabs"
    data-show-count="true"
    data-size="large">
    Follow @fffabs
    </a>
    <script type="text/javascript">
    window.twttr = (function (d, s, id) {
      var t, js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src= "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
      return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
    }(document, "script", "twitter-wjs"));
    </script>
  </div> -->

  <div class="related">
    <h2>Related</h2>
    
      <li><a href="/2020/10/09/image-resize/" title="파이썬 이미지 리사이즈">파이썬 이미지 리사이즈
       &nbsp; <span class="post-meta">October 09, 2020</span></a>
    
      <li><a href="/2020/09/22/class-activation-map/" title="Learning Deep Features for Discriminative Localization">Learning Deep Features for Discriminative Localization
       &nbsp; <span class="post-meta">September 22, 2020</span></a>
    
      <li><a href="/2020/09/21/network-in-network/" title="Network In Network">Network In Network
       &nbsp; <span class="post-meta">September 21, 2020</span></a>
    
  </div>

</div>

        </div>
        <footer class="site-footer">
<p class="small">YoungwonSeo &copy 2020
</p>
</footer>

    </div>

    <script src="//cdn.jsdelivr.net/headroomjs/0.5.0/headroom.min.js"></script>
    <script type="text/javascript">
      var el = document.querySelector(".header-container");
      var headroom  = new Headroom(el, {
        "offset": 205,
        "tolerance": 5
      });
      headroom.init();
    </script>


    <!-- Twitter Shizzle -->
    <!-- <script type="text/javascript">
    window.twttr = (function (d, s, id) {
      var t, js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src= "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
      return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
    }(document, "script", "twitter-wjs"));
    </script> -->
    	<!-- Google Analytics -->
  <script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-78263144-1', 'auto');
		ga('send', 'pageview');
		</script>
		<!-- End Google Analytics -->
</header>


  </body>
</html>
