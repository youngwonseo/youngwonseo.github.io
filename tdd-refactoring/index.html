<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">
  
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성 | 서영원 블로그</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성" />
<meta name="author" content="Youngwon Seo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="본 글은 [우아한테크세미나]에서 진행한 자바지기 박재성님의 TDD, 리팩토링강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다. https://www.youtube.com/watch?v=bIeqAlmNRrA" />
<meta property="og:description" content="본 글은 [우아한테크세미나]에서 진행한 자바지기 박재성님의 TDD, 리팩토링강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다. https://www.youtube.com/watch?v=bIeqAlmNRrA" />
<link rel="canonical" href="https://youngwonseo.github.io/tdd-refactoring/" />
<meta property="og:url" content="https://youngwonseo.github.io/tdd-refactoring/" />
<meta property="og:site_name" content="서영원 블로그" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-26T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성" />
<script type="application/ld+json">
{"datePublished":"2019-05-26T00:00:00+09:00","url":"https://youngwonseo.github.io/tdd-refactoring/","mainEntityOfPage":{"@type":"WebPage","@id":"https://youngwonseo.github.io/tdd-refactoring/"},"dateModified":"2019-05-26T00:00:00+09:00","author":{"@type":"Person","name":"Youngwon Seo"},"description":"본 글은 [우아한테크세미나]에서 진행한 자바지기 박재성님의 TDD, 리팩토링강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다. https://www.youtube.com/watch?v=bIeqAlmNRrA","@type":"BlogPosting","headline":"[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
  
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://youngwonseo.github.io/tdd-refactoring/">
  <link rel="alternate" type="application/atom+xml" title="서영원 블로그" href="https://youngwonseo.github.io/feed.xml" />  
  <link rel="stylesheet" href="/assets/css/syntax.css">
</head>

  <body>
    

<div class="header-container" id="header-container">

<!-- Site navigation -->
  <nav class="site-nav">
    <div class="trigger">
      
        
        <a class="page-link" href="/about/">About</a>
        
      
        
        <a class="page-link" href="/archive/">Archive</a>
        
      
        
      
        
      
        
      
        
        <a class="page-link" href="/category/">Paper</a>
        
      
        
        <a class="page-link" href="/projects/">Projects</a>
        
      
        
        <a class="page-link" href="/study/">Study</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      <a class="page-link" href="/feed.xml">RSS</a>
    </div>
  </nav>

  <!-- The title of the site -->
  <header class="site-header">
    <!-- <a href="/">
      <div class="avatar">
        <img src="/assets/images/avatar.png" />
      </div>
    </a> -->
    <a class="site-title" href="/">서영원 블로그</a>
  </header>

</div>

      <div class="wrapper">
        <div class="page-content">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">[우아한테크세미나] TDD, 리팩토링 - 자바지기 박재성</h1>
    <p class="post-meta">2019-05-26 / Youngwon Seo</p>
  </header>



  <article class="post-content">
    <p>본 글은 [우아한테크세미나]에서 진행한 <strong>자바지기 박재성님</strong>의 <strong>TDD, 리팩토링</strong>강의의 정리내용입니다. 아래의 링크에 가시면 전체영상을 보실 수 있습니다.</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=bIeqAlmNRrA">https://www.youtube.com/watch?v=bIeqAlmNRrA</a></li>
</ul>

<p>목차는 다음과 같습니다.</p>
<ul>
  <li>의식적인 연습이란?</li>
  <li>TDD, 리팩토링 적용 - 개인</li>
  <li>TDD, 리팩토링 적용 - 개인(주니어) -&gt; 팀</li>
  <li>TDD, 리팩토링 적용 - 내가 리더</li>
</ul>

<p>본 영상은 TDD와 리팩토링같은 기술적인 사항뿐만 아니라 훌륭한 개발자가 되기위한 방법, 박재성님이 교육자로써 일하시는동안의 훌륭한 학습방법을 제공하기 고안하신 방법들을 설명합니다.</p>

<p><br /></p>

<h2 id="1-의식적인-연습이란-">1. 의식적인 연습이란 ?</h2>

<p>컴포트존에서 벗어나 의식적인 연습, 즉 본인이 자각하는 연습을 꾸준히하며 개발실력을 올리는 것이 중요합니다. 특히 개발업무와 같이 특정기간이 되면 학습없이, 연습없이 제품을 만들어 낼 수 있지만 이것을 넘어 발전하는 방법을 설명합니다. 이러한 과정을 통해야만 훌륭한 개발자가 될 수 있다고 말씀하십니다.</p>

<h3 id="의식적인-연습의-7가지-원칙도서---1만-시간의-재발견">의식적인 연습의 7가지 원칙(도서 - 1만 시간의 재발견)</h3>
<ol>
  <li>효과적인 훈련 기법이 수립되어 있는 기술 연마</li>
  <li>개인의 <strong>컴포트 존을 벗어난 지점에서 진행, 자신의 현재 능력을 살짝 넘어가는 작업을 지속적으로 시도</strong></li>
  <li><strong>명확하고 구체적인 목표</strong>를 가지고 진행</li>
  <li>신중하고 계회적이다. 즉 개인이 온전히 집중하고 ‘의식적’으로 행동할 것을 요구</li>
  <li><strong>피드백과 피드백에 따른 행동 변경</strong>을 수반</li>
  <li>효과적인 심적 표상을 만들어내는 한편으로 심적 표상에 의존</li>
  <li><strong>기존에 습득한 기술의 특정 부분을 집중적으로 개선함으로써 발전시키고, 수정하는 과정</strong>을 수반</li>
</ol>

<p>우아한테크에서는 의식적연습을 위해 아래와 같이 여러가지 제약사항들을 만들어 프로그래밍 과정이 진행된다고 합니다.</p>

<h3 id="우아한테크-과정">우아한테크 과정</h3>
<h4 id="1주차">1주차</h4>
<ul>
  <li>자바 코드 컨벤션을 지키면서 프로그래밍하기
    <ul>
      <li><a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a></li>
      <li><a href="https://myeonguni.tistory.com/1596">https://myeonguni.tistory.com/1596</a></li>
    </ul>
  </li>
  <li>indent depth가 최대 2, 즉 두번의 들여쓰기 이상 들여쓰기가 안됨, 이를 위해 함수이용</li>
  <li>함수는 한가지 일만하도록 최대한 작게 만들기</li>
</ul>

<h4 id="2주차">2주차</h4>
<ul>
  <li>함수의 길이가 최대 15</li>
  <li>else를 사용하지 마라</li>
</ul>

<h4 id="3주차">3주차</h4>
<ul>
  <li>함수는 길이가 최대 10</li>
  <li>index depth 는 최대 1</li>
  <li>함수 인자는 최대 3개</li>
</ul>

<h4 id="공통">공통</h4>
<ul>
  <li>개발전 기능을 markdown으로 명세</li>
  <li>commit 주석 및 꾸준히 하며 피드백 받기</li>
</ul>

<p><br /></p>

<h2 id="2-의식적인-연습으로-tdd-리팩토링-적용---개인">2. 의식적인 연습으로 TDD, 리팩토링 적용 - 개인</h2>
<p><strong>TDD와 리팩토링은 운동, 평생동안 연습하겠다는 마음가짐으로 시작</strong>합니다. 이를 위해 회사프로젝트보다는 사이드 프로젝트로 시작하여 꾸준히 연습하며 브래이크타임이 없이 연습하는것이 중요합니다. 회사프로젝트의 경우 중간에 우선순위0의 업무들이 주어져 TDD나 리팩토링을 못하는 순간들이 발생하는데 사이드 프로젝트를 통해 꾸준히 연습할 수 있는 환경을 만들어 놓는것입니다. 이 방법은 TDD,리팩토링이 아닌 다른요소들을 연습할때도 추천되는 방법이라고 생각합니다.</p>

<p><br /></p>

<h3 id="1단계-단위테스트-연습">1단계, 단위테스트 연습</h3>
<p>TDD에 대한 간단한 테스트 연습코드입니다. 자바 내장 API인 String API와 Collection API에 대한 테스트를 직관적으로 보여줍니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringTest</span><span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">split</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">values</span> <span class="o">=</span> <span class="s">"1"</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">).</span><span class="na">contains</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
    <span class="n">values</span> <span class="o">=</span> <span class="s">"1,2"</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">).</span><span class="na">containsExactly</span><span class="o">(</span><span class="s">"1"</span><span class="o">,</span><span class="s">"2"</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">substring</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="o">(</span><span class="s">"1,2"</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"1,2"</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CollectionTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">arrayList</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">values</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
    <span class="n">values</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"second"</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"third"</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"first"</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">0</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>위 연습의 효과는 다음과 같습니다.</p>
<ul>
  <li>단위테스트 방법을 학습할 수 있다.</li>
  <li>단위테스트 도구(xUnit)의 사용법을 익힐 수 있다.</li>
  <li>사용하는 API에 대한 학습 효과가 있다.</li>
</ul>

<p>내가 구현하는 함수에 단위 테스트를 적용을 시작하기 위해서는 <strong>Input과 Output이 명확한 클래스 메소드(보통  Util 성격의 메소드)</strong>부터 시작하면 됩니다.</p>

<p><br /></p>

<h3 id="2단계-tdd-연습">2단계, TDD 연습</h3>
<p>TDD의 간략한 설명을 하면 처음으로 실패하는 테스트코드를 작성하고 패스, 이후 리펙토링이 진행됩니다.
<img src="/assets/post/tdd/test-driven-development-tdd-cycle.jpg" alt="" /></p>

<p>항상 시작은 난의도가 낮은 문제부터 시작합니다. 이를 위해 임의의 테스트환경을 구성합니다. 아래는 문자열 덧셈 계산기(StringCalculator 클래스의 splitAndSum)로 쉼표 또는 콜론을 기준으로 분리한 숫자의 합을 반환하는 기능을 가지고 있습니다. null이나 빈문자열이면 0을 반환합니다.</p>

<p>아래의 테스트코드와 계산기에 대한 프로덕트코드를 가지고 리팩토링 시작을 시작해 봅니다. 여기서는 중관과정을 최대한 생략하고 최종 리펙토링 코드들을 보이는데 위의 원본영상을 보시면 변환되는 과정을 살펴볼 수 있습니다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculatorTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">null_또는_빈값</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="kc">null</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="s">""</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">값_하나</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="s">"1"</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">쉽표_구분자</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="s">"1,2"</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">쉼표_콜론_구분자</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="s">"1,2:3"</span><span class="o">)).</span><span class="na">isEqualsTo</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>여기서는 다음의 프로덕트코드에 대해 TDD를 연습합니다. 이 코드는 위 테스트를 전부 패스합니다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">splitAndSum</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">if</span><span class="o">(</span><span class="n">test</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">test</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="nc">String</span><span class="o">[]</span> <span class="n">values</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">",|:"</span><span class="o">);</span>
      <span class="k">for</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span> <span class="o">:</span> <span class="n">values</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="nc">Interger</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="3단계---리팩토링-연습메소드-분리">3단계 - 리팩토링 연습(메소드 분리)</h3>
<p>리팩토링에서는 항상 정성적인 기준보다는 정량적인 기준으로 판단하고 연습해야합니다. 다음은 위 코드에서 한 메서드에 오직 한 단계의 들여쓰기(indent)사용하기와 else사용안하기를 만족하는 리팩토링 결과 코드입니다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">splitAndSum</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">test</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">test</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">values</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">",:"</span><span class="o">);</span>
    <span class="k">return</span> <span class="nf">sum</span><span class="o">(</span><span class="n">values</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">values</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span> <span class="o">:</span> <span class="n">values</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">result</span> <span class="o">+=</span> <span class="nc">Interger</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>한 메서드는 한가지 일만 하도록 리팩토링하기 위해 문자열을 숫자로 변환하는 부분과 합치는 부분을 메서드로 각각 분리합니다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">splitAndSum</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">test</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">test</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// 로컬변수 최소화</span>
    <span class="k">return</span> <span class="nf">sum</span><span class="o">(</span><span class="n">toInts</span><span class="o">(</span><span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">",|:"</span><span class="o">)));</span>
  <span class="o">}</span>
  
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">toInts</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">values</span><span class="o">){</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">numbers</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">numbers</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">result</span> <span class="o">+=</span> <span class="n">numbers</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>compose method패턴 적용하여 동등한 수준의 작업을 하는 여러 단계로 나눈다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">splitAndSum</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">isBlank</span><span class="o">(</span><span class="n">text</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nf">sum</span><span class="o">(</span><span class="n">toInts</span><span class="o">(</span><span class="n">split</span><span class="o">(</span><span class="n">text</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isBlank</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">test</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">test</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">split</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">",|:"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>위 코드를 보면 호출되는 splitAndSum 함수만 public이고 나머지는 전부 private로 구현되는 것을 알 수 있습니다. 이것은 분석하는 입장에서 public메서드를 먼저 분석하면되서 가독석을 높여줍니다. 특이 public메서드에서 호출되는 private메서드 또한 네이밍을 통해 동작작업을 충분히 유추할 수 있는 좋은 코드 입니다.</p>

<p>indent나 else등의 규칙을 한번에 적용하기 보다 <strong>한 가지씩 리팩토링</strong>하는 것을 추천합니다.</p>

<p>여기서 다시한번 말하지만 리팩토링전 코드, 즉 <strong>컴포트존을 제거하고 리팩토링을 통해 좋은 코드를 작성할 수 있도록 노력합시다!!</strong></p>

<p><br /></p>

<h3 id="리팩토링-연습클래스-분리">리팩토링 연습(클래스 분리)</h3>
<p>숫자 이외의 값 또는 음수가 입력되면 RuntimeException 발생하도록 적용합니다. 이를 위해 다름과 같은 테스트 코드가 추가됩니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringCalculatorTest</span> <span class="o">{</span>
  <span class="o">...</span>  
  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="nc">RuntimeException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">음수값</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">StringCalculator</span><span class="o">.</span><span class="na">splitAndSum</span><span class="o">(</span><span class="s">"-1,2:3"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>메서드 toInt를 클래스로 분리, 메서드로 분리된 부분은 클래스로 분리될 요지가 있다고 생각할 수 있습니다.</p>
<ul>
  <li>양수를 보장</li>
  <li>메서드당 한가지일을 수행</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Positive</span><span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Positive</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Positive</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">){</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">Positive</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Positive</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Positive</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">number</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="na">number</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getNunber</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">number</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h4 id="클래스를-분리하는-원칙">클래스를 분리하는 원칙</h4>
<p>일급컬렉션 (위 Positive는 primitive type을 wrapper한 class)으로 분리가 가능할 경우 클래스로 분리가 가능합니다. 여기서 일급컬렉션이란 하나의 컬렌션을 주된 맴버로 가지는 클래스입니다. 이때 클래스에 대한 리펙토링 기준으로 3개 이상의 인스턴스 변수를 가지지 않도록 연습할 수 있습니다.</p>

<p><strong>모든 연습기준은 정략적 기준입니다!</strong> 정량적 평가는 혼자 연습해도 정확하게 평가가능하고 피드백이 가능합니다.</p>

<p><br /></p>

<h3 id="4단계---장난감-프로젝트-난이도-높이기">4단계 - 장난감 프로젝트 난이도 높이기</h3>
<p>다음과 같은 사항이 만족되면 TDD와 리팩토링을 연습하기 좋습니다.</p>
<ul>
  <li>게임과 같이 요구사항이 명확안 프로그램으로 연습</li>
  <li>의존관계(DB등)이 없는 프로젝트</li>
  <li>약간은 복잡한 로직이 있는 프로그램</li>
</ul>

<h3 id="5단계---db-webui등-위존성있는-코드-리팩토링-연습">5단계 - DB, WebUI등 위존성있는 코드 리팩토링 연습</h3>

<h3 id="한-단계-더-나아간-연습하기">한 단계 더 나아간 연습하기</h3>
<ul>
  <li>컴파일 에러를 최소화하면서 리팩토링하기</li>
  <li>ATDD 기반으로 응용 어플리케이션 개발하기</li>
  <li>레거시 애플리케이션에 테스트 코드 추가해 리팩토링하기</li>
</ul>

<h3 id="구체적인-연습-목표-찾기">구체적인 연습 목표 찾기</h3>
<p>이러한 방법들은 박재성님이 만드신게 아니라 아래의 책들에서 명시하는 방법이라고 합니다.</p>
<h4 id="객체지향-생활체조-원칙-the-thoughtworks-anthology">객체지향 생활체조 원칙 <a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9788992939249&amp;orderClick=LAG&amp;Kc=">The ThoughtWorks Anthology</a></h4>
<ul>
  <li>규칙 1 : 한 메서드에 오직 한 단계의 들여쓰기만 한다.</li>
  <li>규칙 2 : else 예약어를 쓰지 않는다.</li>
  <li>규칙 3: 모든 원시값과 문자열을 포장한다.</li>
  <li>규칙 4 : 한 줄에 점을 하나만 찍는다.</li>
  <li>규칙 5 : 줄여쓰지 않는다(축약 금지).</li>
  <li>규칙 6 : 모든 엔티티를 작게 유지한다.</li>
  <li>규칙 7 : 3개 이상의 인스턴스 변수를 가진 클래스를 쓰지 않는다.</li>
  <li>규칙 8: 일급 콜렉션을 쓴다.</li>
  <li>규칙 9 : 게터/세터/프로퍼티를 쓰지 않는다.</li>
</ul>

<h4 id="메소드-인자-원칙-cleancode">메소드 인자 원칙 <a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9788966260959&amp;orderClick=LAH&amp;Kc=">CleanCode</a></h4>
<ul>
  <li>메소드 인자 개수</li>
  <li>메소드에서 이상적인 인자개수는 0개이다. 다음은 1개이고, 다음은 2개이다.</li>
  <li>3개는 가능한 피하는 편이 좋다.</li>
  <li>4개 이상은 특별한 이유가 있어도 사용하면 안된다.</li>
</ul>

<p>같은 과제를 반복적으로 연습하며 TDD, 리팩토링 적용하 연습하도록 합니다.</p>

<p><br /></p>

<h2 id="3-tdd-리팩토링-적용---개인주니어---팀">3. TDD, 리팩토링 적용 - 개인(주니어) -&gt; 팀</h2>
<p>변화를 요구, 안되면 퇴사</p>

<p><br /></p>

<h2 id="4-tdd-리팩토링-적용---리더">4. TDD, 리팩토링 적용 - 리더</h2>
<p>1:1로 공약
팀원이 개선할 부분을 말하고, 해결책을 제안하도록 유도</p>

<p><br /></p>

<h2 id="references">References</h2>
<ul>
  <li>https://www.youtube.com/watch?v=bIeqAlmNRrA</li>
  <li>https://medium.com/swlh/learning-to-love-tdd-f8eb60739a69</li>
</ul>

  </article>

  <hr>

  <!-- <div class="question">
    <h2>Questions?</h2>
    <p>Have a question regarding the post above? <br />Or any of my designs?</p>
    

  </div> -->

  <!-- <div class="related">
    <h2>Related</h2>
    
      <li><a href="/kubernetes/ingress/" title="쿠버네티스 - 인그레스(Ingress)">쿠버네티스 - 인그레스(Ingress)
       &nbsp; <span class="post-meta">February 19, 2021</span></a>
    
      <li><a href="/kubernetes/service/" title="쿠버네티스 - 서비스(Service)">쿠버네티스 - 서비스(Service)
       &nbsp; <span class="post-meta">February 18, 2021</span></a>
    
      <li><a href="/kubernetes/deployment/" title="쿠버네티스 - 디플로이먼트(Deployment)">쿠버네티스 - 디플로이먼트(Deployment)
       &nbsp; <span class="post-meta">February 17, 2021</span></a>
    
  </div> -->

  
  
    <script src="https://utteranc.es/client.js"
      repo="youngwonseo/youngwonseo.github.io"
      issue-term="pathname"
      theme="github-light"
      crossorigin="anonymous"
      async>
    </script>
  

</div>

        </div>
        <footer class="site-footer">
<p class="small"></p>
</footer>

    </div>

    <script src="//cdn.jsdelivr.net/headroomjs/0.5.0/headroom.min.js"></script>
    <script type="text/javascript">
      var el = document.querySelector(".header-container");
      var headroom  = new Headroom(el, {
        "offset": 205,
        "tolerance": 5
      });
      headroom.init();
    </script>


    <!-- Twitter Shizzle -->
    <script type="text/javascript">
    window.twttr = (function (d, s, id) {
      var t, js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src= "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
      return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });
    }(document, "script", "twitter-wjs"));
    </script>

  </body>
</html>
